* vm (hyper v)
  gen 2
  external network, allow management os to share
  enable guest services for a good fullscreen
* nixos install
start out as nixos user with no password
** partitioning
sudo everything, probably:
parted -l (list disks)
parted [disk name]
parted mklabel gpt (make partition table)
parted print (show table)
- note partition sizes are debatable. nixos wants 512 for boot, and with 8GB ram i'm going with 4GB swap on 32GB hard disk (at the end). the rest is the root partition
mkpart primary 512MB 28GB
mkpart primary linux-swap 28GiB 100%
mkpart ESP fat32 1MiB 512MiB
set 3 esp on
** formatting
sudo:
mkfs.ext4 -L nixos /dev/sda1
mkswap -L swap /dev/sda2
mkfs.fat -F 32 -n boot /dev/sda3
** install
sudo:
mount /dev/disk/by-label/nixos /mnt
mkdir -p /mnt/boot
mount /dev/disk/by-label/boot /mnt/boot
swapon /dev/sda2
nixos-generate-config --root /mnt
might need to do some network config (
nixos-install
* add git to default /etc/nixos/configuration.nix
environment.systemPackages = with pkgs; [
  git
];
* clone repo to wherever
git clone 
then
cp -f cbootstrap.nix /etc/nixos/configuration.nix
cp fbootstrap.nix /etc/nixos/flake.nix
* configuration flake
- it's responsible for the following:
  - getting nix flakes
  - system-wide config
    - time zone
    - networking stuff
  - packages common to all users or necessary for doing other parts of the config
    - home manager?
    - git
  - secrets...
 
